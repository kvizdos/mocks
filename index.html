<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-Discord-Channel.html">Channel</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-Discord-Guild.html">Guild</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-Discord-Member.html">Member</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-Discord-Message.html">Message</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Discord-Message.html#reply">reply</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-MongoDB-Database.html">Database</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MongoDB-Database.html#collection">collection</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MongoDB-Database.html#find">find</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MongoDB-Database.html#insert">insert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MongoDB-Database.html#insertOne">insertOne</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MongoDB-Database.html#project">project</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MongoDB-Database.html#then">then</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MongoDB-Database.html#toArray">toArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MongoDB-Database.html#updateOne">updateOne</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-Discord.html">Discord</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-MongoDB.html">MongoDB</a></span></li><li class="nav-heading">Namespaces</li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="module-Discord-Guild_members.html">members</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Discord-Guild_members.html#.add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Discord-Guild_members.html#.fetch">fetch</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="module-Discord-Member_roles.html">roles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Discord-Member_roles.html#.add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Discord-Member_roles.html#.remove">remove</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>Mocks</h1>
<p>This is a repo of mocks for NodeJS testing. In it, there are some mocks that already exist, e.g. mongo mocks, and some that <em>already exist</em>, but don't have good docs, like the Discord mocks.</p>
<h2>View the docs</h2>
<p><a href="https://kvizdos.github.io/mocks/">View the docs here</a></p>
<h2>Available mocks:</h2>
<ul>
<li>Mongodb</li>
<li>DiscordJS (for bots)</li>
</ul>
<h2>How to use it?</h2>
<p>Let's take the Discord mock as an example. First, let's install Mocks with npm:
<code>npm install @kvizdos/mocks</code>
After that, we can simply require the Discord object from it. Let's destructure it to alias is as <code>DiscordMocks</code>
<code>const { Discord: DiscordMocks } = require(&quot;@kvizdos/mocks&quot;)</code></p>
<p>Now, lets take a look at some bot boilerplate code:
index.js:</p>
<pre class="prettyprint source"><code>const Discord = require('discord.js');
const client = new Discord.Client();
const dotenv = require(&quot;dotenv&quot;);
const MessageHandler = require(&quot;./messages&quot;);
dotenv.config();

client.on('ready', () => {
    console.log(`Logged in as ${client.user.tag}!`);
});

client.on('message', msg => {
    MessageHandler.ping(msg);
});

client.login(process.env.DISCORDTOKEN);
</code></pre>
<p>messages.js:</p>
<pre class="prettyprint source"><code>module.exports.ping = (msg) => {
    const author = msg.author.username;

    msg.reply(`wow, your name, ${author}, is great!`);
}
</code></pre>
<p>Now, this will work with the client running, wahoo! But, let's get a unit test in place.
tests/messages.spec.js:</p>
<pre class="prettyprint source"><code>const { Discord: DiscordMock } = require(&quot;@kvizdos/mocks&quot;)
const MessageHandler = require(&quot;../messages&quot;);

describe(&quot;Message unit tests&quot;, () => {
    it(&quot;should reply with the correct message&quot;, () => {
        const Channel = new DiscordMock.Channel();
        const Guild = new DiscordMock.Guild();
        const Member = new DiscordMock.Member(Guild, 12345);
        const Message = new DiscordMock.Message(Member, &quot;Test message&quot;, [], Channel, Guild);

        MessageHandler.ping(Message);
        
        expect(Message.replyStatus).toBe(&quot;&lt;@1235>, wow, your name, 12345, is great!&quot;) // For now, the username is an alias of the ID
    })
})
</code></pre>
<p>And there you have it! Unit tested Discord bots.</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Fri Jul 17 2020 22:24:19 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>